<section class="container-fluid py-5">
    <div class="container">
        @if (labsList.length === 0) {
        <ng-container *ngTemplateOutlet="loading"></ng-container>
        } @else{
        <ng-container *ngTemplateOutlet="ready"></ng-container>
        }
    </div>
</section>

<ng-template #ready>
    <div class="row align-items-center justify-content-center gy-3">
        @for (lab of labsList; track lab.lab_id) {
        <div class="col-md-4">
            <div class="card shadow">
                <div class="card-header bg-warning-subtle">
                    <h4 class="text-capitalize text-center">{{lab.name}}</h4>
                </div>

                <div class="container shadow" style="
                display: flex;
                justify-content: center;
                align-items: center;
                width: 100%; 
                height: 100px; 
                overflow: hidden;">
                    @if (lab.lab_image) {
                    <img [src]="'data:image/jpeg;base64,' + lab.lab_image" class="card-img-top" alt="{{lab.lab_image}}">
                    } @else {
                    <img src="/images/icon.png" class="img-fluid" alt="Imagen de laboratorio">
                    }
                </div>
                <div class="card-body text-center p-3" style="width: 100%; height: 250px; overflow: auto;">
                    <table class="table table-striped table-hover align-middle">
                        <tbody>
                            <tr>
                                <th class="bg-warning text-dark px-1">
                                    <i class="bi bi-bank"></i> Institución:
                                </th>
                                <td class="text-capitalize">{{lab.institution}}</td>
                            </tr>
                            <tr>
                                <th class="bg-warning text-dark px-1">
                                    <i class="bi bi-buildings"></i> Campus:
                                </th>
                                <td class="text-capitalize">{{lab.campus}}</td>
                            </tr>
                            <tr>
                                <th class="bg-warning text-dark px-1">
                                    <i class="bi bi-lightbulb"></i> Especialidad:
                                </th>
                                <td class="text-capitalize">{{lab.specialization}}</td>
                            </tr>
                            <tr>
                                <th class="bg-warning text-dark px-1">
                                    <i class="bi bi-geo-alt"></i> Ubicación:
                                </th>
                                <td class="text-capitalize">{{lab.location}}</td>
                            </tr>
                            <tr>
                                <th class="bg-warning text-dark px-1">
                                    <i class="bi bi-file-text"></i> Descripción:
                                </th>
                                <td class="text-capitalize">{{lab.description}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                
                <div class="card-footer">
                    <!--
                    <a class="btn btn-warning w-100" [routerLink]="['/details/', lab.lab_id]" aria-label="details"><i class="bi bi-search"></i></a>
                    -->
                </div>
            </div>
        </div>
        }
    </div>
</ng-template>

<ng-template #loading>
    <div class="col text-center py-5">
        <div class="spinner-border text-dark" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Cargando...</p>
    </div>
</ng-template>