<div class="container-fluid py-5">
    @if (user) {
    <ng-container *ngTemplateOutlet="ready"></ng-container>
    } @else{
    <ng-container *ngTemplateOutlet="loading"></ng-container>
    }
</div>

<ng-template #loading>
    <div class="col text-center py-5">
        <div class="spinner-border text-dark" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Cargando...</p>
    </div>
</ng-template>

<ng-template #ready>
    <div class="container-lg">
        <div class="card bg-warning-subtle shadow-lg rounded-4">
            <div class="card-body p-5 shadow">
                <div class="row d-flex align-items-center gap-5">

                    <!-- Columna de la imagen -->
                    <div class="col-md-4 text-center">
                        @if (user?.profile_image) {
                        <img [src]="'data:image/png;base64,' + user?.profile_image"
                            class="rounded-circle border border-3 border-light shadow-sm" width="250" height="250"
                            alt="Avatar" style="object-fit: cover;">
                        }
                        <img src="/images/icon.png" class="rounded-circle border border-3 border-light shadow-sm"
                            width="250" height="250" alt="Avatar" style="object-fit: cover;">
                        <hr>
                        <h6 class="">{{'@'+ user?.username }}</h6>
                        <h4 class="fw-bold">{{ user?.first_name + " " + user?.last_name }}</h4>
                        <h6 class="">{{ user?.institution }}</h6>
                    </div>

                    <!-- Columna de información -->
                    <div class="col-md-6">
                        <div class="mb-3">
                            <span class="fw-bold">Nombre Completo:</span> <br>
                            <span class="border-bottom pb-1">{{ user?.first_name + " " + user?.last_name }}</span>
                        </div>

                        <div class="mb-3">
                            <span class="fw-bold">Fecha de Nacimiento:</span> <br>
                            <span class="border-bottom pb-1">{{ formatDate(user?.birth_date) }}</span>
                        </div>
                        <div class="mb-3">
                            <span class="fw-bold">Correo Electrónico:</span> <br>
                            <span class="border-bottom pb-1">{{ user?.email }}</span>
                        </div>
                        <div class="mb-3">
                            <span class="fw-bold">Teléfono:</span> <br>
                            <span class="border-bottom pb-1">{{ user?.phone }}</span>
                        </div>
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-danger px-4 py-2 rounded-pill shadow-sm"
                                (click)="logOut()">
                                <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container-lg mt-5">
        <div class="row gy-3">
            <div class="col-md-6">
                <div class="card bg-warning-subtle shadow">
                    <div class="card-header">
                        <h3>Reservaciones</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-warning-subtle shadow">
                    <div class="card-header">
                        <h3>Prestamos</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

</ng-template>