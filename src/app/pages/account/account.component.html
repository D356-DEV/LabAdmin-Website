<div class="container-fluid py-5">
    @if (user) {
    <ng-container *ngTemplateOutlet="ready"></ng-container>
    } @else{
    <ng-container *ngTemplateOutlet="loading"></ng-container>
    }
</div>

<ng-template #loading>
    <div class="col text-center py-5">
        <div class="spinner-border text-dark" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-3">Cargando...</p>
    </div>
</ng-template>

<ng-template #ready>
    <div class="container-lg">
        <div class="card bg-warning-subtle shadow-lg rounded-4">
            <div class="card-body p-5 shadow">
                <div class="row gy-3">
                    <!-- Columna de la imagen -->
                    <div class="col-md-6 d-flex flex-column align-items-center justify-content-center">
                        @if (user?.profile_image) {
                        <img [src]="'data:image/png;base64,' + user?.profile_image"
                            class="rounded-circle border border-3 border-light shadow-sm" width="250" height="250"
                            alt="Avatar" style="object-fit: cover;">
                        }
                        <img src="/images/icon.png" class="rounded-circle border border-3 border-light shadow-sm"
                            width="250" height="250" alt="Avatar" style="object-fit: cover;">
                        <hr>
                        <h6 class="">{{'@'+ user?.username }}</h6>
                        <h4 class="fw-bold mb-0">
                            {{ user?.first_name + " " + user?.last_name }}
                        </h4>
                        @if (isAdmin) {
                        <span class="badge text-bg-success">Admin</span>
                        } @else {
                        <span class="badge text-bg-primary">Estudiante</span>
                        }
                        <h6 class="my-1">{{ user?.institution }}</h6>
                    </div>

                    <!-- Columna de información con título arriba y valor debajo -->
                    <div class="col-md-6 d-flex flex-column align-items-center justify-content-center">
                        <div class="w-100">
                            <div class="mb-3">
                                <span class="fw-bold">Fecha de Nacimiento:</span><br>
                                <span class="border-bottom pb-1">{{ formatDate(user?.birth_date) }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="fw-bold">Correo:</span><br>
                                <span class="border-bottom pb-1">{{ user?.email }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="fw-bold">Telefono:</span><br>
                                <span class="border-bottom pb-1">{{ user?.phone }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="fw-bold">Campus:</span><br>
                                <span class="border-bottom pb-1">{{ user?.campus }}</span>
                            </div>
                            <div class="mb-3">
                                <span class="fw-bold">Carrera:</span><br>
                                <span class="border-bottom pb-1">{{ user?.student_carrer }}</span>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-danger px-4 py-2 rounded-pill shadow-sm"
                                (click)="logOut()">
                                <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
                            </button>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="container-lg mt-5">
        <div class="row gy-3">
            <div class="col-md-6">
                <div class="card bg-warning-subtle shadow">
                    <div class="card-header">
                        <h3>Reservaciones</h3>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card bg-warning-subtle shadow">
                    <div class="card-header">
                        <h3>Prestamos</h3>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @if (isAdmin) {
    <div class="container-lg mt-5">
        <div class="card">
            <div class="card-header bg-warning-subtle">
                <div class="row">
                    <div class="col-8 col-4 d-flex align-items-center justify-content-start">
                        <h3>Laboratorios</h3>
                    </div>
                    <div class="col-4 d-flex align-items-center justify-content-center">
                        <button type="button" class="btn btn-warning w-100"><i
                                class="bi bi-plus-circle mx-1"></i>Agregar</button>
                    </div>
                </div>
            </div>
            <div class="card-body">

            </div>
        </div>
    </div>
    }
</ng-template>